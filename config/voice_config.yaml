# Dreamweaving Voice Configuration (Consolidated)
# ================================================
# This is the single source of truth for all voice settings.
# Consolidates voice_config.yaml and voice_profiles.json.
#
# Default Provider: Coqui TTS (XTTS v2) - Free, local, high-quality
# Alternative: Google Cloud TTS (Neural2 voices) - Paid, cloud-based
# Note: Edge TTS is deprecated

# =============================================================================
# VOICE PROFILES
# =============================================================================
# All available voices for session generation

profiles:
  # Female Voices (VERIFIED against Google Cloud TTS documentation)
  # Female Neural2: C, E, F, G, H
  # Male Neural2: A, D, I, J

  default:
    name: "en-US-Neural2-F"
    gender: "female"
    description: "Clear, articulate female voice - ideal for empowerment and confidence"
    recommended_for: ["empowerment", "confidence", "consistency", "motivation", "habits"]
    characteristics:
      - "Clear and articulate"
      - "Empowering presence"
      - "Professional quality"
      - "Excellent for action-oriented hypnosis"
      - "Natural pacing with hypnotic breaks"

  deep_female:
    name: "en-US-Neural2-E"
    gender: "female"
    description: "Deeper, resonant female voice - ideal for deep trance and meditation"
    recommended_for: ["deep_trance", "sleep", "meditation", "spiritual", "healing"]
    characteristics:
      - "Deep and resonant"
      - "Deeply relaxing"
      - "Professional quality"
      - "Excellent for hypnosis and pathworking"
      - "Clear articulation with warmth"

  soft_female:
    name: "en-US-Neural2-C"
    gender: "female"
    description: "Soft, nurturing female voice"
    recommended_for: ["healing", "inner_child", "emotional_release"]

  clear_female:
    name: "en-US-Neural2-F"
    gender: "female"
    description: "Clear, articulate female voice (same as default)"
    recommended_for: ["confidence", "clarity", "empowerment"]

  warm_female:
    name: "en-US-Neural2-G"
    gender: "female"
    description: "Warm, approachable female voice"
    recommended_for: ["general", "relaxation", "guidance"]

  bright_female:
    name: "en-US-Neural2-H"
    gender: "female"
    description: "Bright, clear female voice"
    recommended_for: ["affirmations", "energy", "motivation"]

  # Male Voices (VERIFIED against Google Cloud TTS documentation)
  calm_male:
    name: "en-US-Neural2-A"
    gender: "male"
    description: "Calm, neutral male voice"
    recommended_for: ["general", "narration", "guidance"]

  deep_male:
    name: "en-US-Neural2-D"
    gender: "male"
    description: "Deep, resonant male voice"
    recommended_for: ["grounding", "power", "masculine_healing"]

  warm_male:
    name: "en-US-Neural2-I"
    gender: "male"
    description: "Warm, compassionate male voice"
    recommended_for: ["general", "healing", "guidance"]

  mature_male:
    name: "en-US-Neural2-J"
    gender: "male"
    description: "Rich, mature male voice"
    recommended_for: ["wisdom", "authority", "transformation"]

# =============================================================================
# SESSION TYPE RECOMMENDATIONS
# =============================================================================
# Suggested voices for different session types (in order of preference)

session_recommendations:
  healing: ["default", "soft_female", "warm_male"]
  confidence: ["clear_female", "deep_male", "mature_male"]
  sleep: ["default", "soft_female", "deep_male"]
  abundance: ["clear_female", "mature_male", "default"]
  spiritual: ["default", "warm_male", "soft_female"]
  inner_child: ["soft_female", "warm_male", "warm_female"]
  empowerment: ["clear_female", "deep_male", "mature_male"]
  deep_journey: ["default", "soft_female", "warm_male"]
  relaxation: ["default", "soft_female", "warm_female"]
  pathworking: ["default", "soft_female", "warm_male"]
  meditation: ["default", "soft_female", "deep_male"]

# =============================================================================
# DEFAULT PROSODY SETTINGS
# =============================================================================
# Standard speech settings for hypnotic delivery

prosody_defaults:
  speaking_rate: 1.0       # Normal speed - hypnotic pacing via SSML breaks
  pitch_semitones: -1.0    # Slightly lower for warmth
  volume_gain_db: 0.0      # No adjustment

# SSML Break Guidelines (use these instead of slow speaking rates)
# - Minimum break: 700ms (after phrases)
# - Medium break: 900ms (between ideas)
# - Long break: 1200ms (between sections)
# - Add commas before breaks for natural sentence endings
# - Use ellipsis (...) for breath counts and countdowns

# Section-specific prosody overrides
section_prosody:
  pretalk:
    speaking_rate: 1.0     # Normal pace for information
    pitch_semitones: 0.0

  induction:
    speaking_rate: 1.0     # Normal speed, pacing via SSML breaks
    pitch_semitones: -1.0

  journey:
    speaking_rate: 1.0     # Normal speed, pacing via SSML breaks
    pitch_semitones: -1.0

  deepening:
    speaking_rate: 1.0     # Normal speed, pacing via SSML breaks
    pitch_semitones: -1.0

  awakening:
    speaking_rate: 1.0     # Normal speed
    pitch_semitones: -1.0

  closing:
    speaking_rate: 1.0     # Normal pace
    pitch_semitones: 0.0

# =============================================================================
# AUDIO SETTINGS
# =============================================================================

audio:
  # TTS output settings
  tts:
    audio_encoding: "MP3"
    sample_rate_hz: 24000
    effects_profile: ["headphone-class-device"]

  # Quality presets
  presets:
    standard:
      sample_rate_hz: 24000
      description: "Standard quality for most uses"

    high_quality:
      sample_rate_hz: 48000
      description: "High quality for final production"

    small_file:
      sample_rate_hz: 16000
      effects_profile: ["medium-bluetooth-speaker-class-device"]
      description: "Smaller files for testing"

  # Mastering settings
  mastering:
    target_lufs: -14
    true_peak_dbtp: -1.5
    target_lra: 11
    sample_rate_hz: 48000
    bit_depth: 24

    eq:
      warmth_boost_hz: 250
      warmth_boost_db: 1.5
      presence_boost_hz: 3000
      presence_boost_db: 1.0
      high_shelf_hz: 10000
      high_shelf_db: -0.5

    stereo_enhancement:
      enabled: true
      mid_level: 0.95
      side_level: 1.05

    limiting:
      ceiling_linear: 0.95
      attack_ms: 5
      release_ms: 50

# =============================================================================
# PROVIDER CONFIGURATION
# =============================================================================

provider:
  # Default provider (coqui = free local, google = paid cloud)
  default: "coqui"
  language_code: "en-US"

  # Coqui TTS settings (XTTS v2)
  coqui:
    model: "tts_models/multilingual/multi-dataset/xtts_v2"
    speaking_rate: 0.95        # Slightly slower for natural pacing
    default_quality: "hypnotic"  # Quality preset: hypnotic, natural, expressive
    description: "Free, local, high-quality voice synthesis using XTTS v2"

    # Quality Presets for XTTS v2
    # Use --quality flag: python generate_voice.py script.ssml output/ --quality hypnotic
    quality_presets:
      hypnotic:
        temperature: 0.45        # Low for consistent, stable voice
        repetition_penalty: 3.0  # Reduce phrase repetition
        top_p: 0.75              # Focused token selection
        top_k: 50                # Limit vocabulary per step
        speed: 0.92              # Slightly slower for trance
        description: "Optimized for hypnotic/trance content - stable, consistent voice"

      natural:
        temperature: 0.55        # Balanced naturalness
        repetition_penalty: 2.5
        top_p: 0.80
        top_k: 50
        speed: 0.95
        description: "Balanced preset for general content"

      expressive:
        temperature: 0.70        # More variation
        repetition_penalty: 2.0
        top_p: 0.85
        top_k: 50
        speed: 1.0
        description: "More expressive variation for dynamic content"

  # Google Cloud TTS settings (Neural2)
  google:
    service: "Google Cloud Text-to-Speech"
    api_version: "v1"
    default_voice: "en-US-Neural2-H"
    speaking_rate: 0.88
    sample_rate_hz: 24000
    effects_profile: ["headphone-class-device"]
    description: "Paid cloud service with Neural2 voices"

  # Deprecated providers (for reference only)
  deprecated:
    - name: "edge-tts"
      reason: "Removed from codebase"
      migration_date: "2025-01"

# =============================================================================
# USAGE NOTES
# =============================================================================

notes: |
  TTS PROVIDER GUIDE:

  DEFAULT: Coqui TTS (XTTS v2)
    - Free, runs locally, no API costs
    - High-quality natural voice synthesis
    - Uses XTTS v2 model (best open-source TTS)
    - Command: python scripts/core/generate_voice.py script.ssml output/

  QUALITY PRESETS (Coqui only):
    - hypnotic (DEFAULT): Low temperature (0.45), stable voice, optimized for trance
    - natural: Balanced temperature (0.55), good for general content
    - expressive: Higher variation (0.70), more dynamic delivery
    - Command: python scripts/core/generate_voice.py script.ssml output/ --quality natural

  QUALITY PARAMETERS EXPLAINED:
    - temperature: Controls randomness (0.3-0.8). Lower = more consistent
    - repetition_penalty: Prevents repeated phrases (2.0-4.0). Higher = less repetition
    - top_p: Nucleus sampling threshold (0.7-0.9). Lower = more focused
    - top_k: Vocabulary limit per token (40-80). Lower = more predictable
    - speed: Post-synthesis speed adjustment (0.9-1.1)

  ALTERNATIVE: Google Cloud TTS
    - Paid service (~$0.016 per 1M characters)
    - Requires GOOGLE_APPLICATION_CREDENTIALS
    - Multiple voice options (Neural2-A through Neural2-J)
    - Command: python scripts/core/generate_voice.py script.ssml output/ --provider google

  VOICE PROFILES (Google only):
    - Female Neural2: C, E, F, G, H
    - Male Neural2: A, D, I, J
    - For deep trance/sleep: use 'deep_female' (Neural2-E)
    - For empowerment: use 'clear_female' (Neural2-F)

  HYPNOTIC PACING APPROACH:
    - Use 1.0x speaking rate (normal speed)
    - Control pacing through SSML breaks, NOT slow speech
    - Minimum break: 700ms (after phrases)
    - Medium break: 900ms (between ideas)
    - Long break: 1200ms+ (between sections)
    - Add commas before breaks for natural endings

  IMPORTANT:
    - Coqui TTS is now the default (free, local)
    - Use --provider google for Google Cloud TTS
    - Voice enhancement is applied automatically to both providers
    - Use --quality flag to select quality preset for Coqui
